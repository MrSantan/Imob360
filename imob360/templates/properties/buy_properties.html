
{% extends 'base.html' %}
{% load static %}

{% block title %}Comprar Imóveis - Imob360{% endblock %}

{% block content %}
<section class="section">
    <div class="container">
        <h1 class="section-title">Comprar Imóveis</h1>
        <p class="section-subtitle">Encontre a propriedade perfeita para comprar</p>
        
        <!-- Filtros -->
        <div class="search-bar">
            <form method="GET" class="search-form">
                <input type="text" name="city" placeholder="Cidade..." value="{{ request.GET.city }}">
                <select name="property_type">
                    <option value="">Tipo de Imóvel</option>
                    <option value="house" {% if request.GET.property_type == 'house' %}selected{% endif %}>Casa</option>
                    <option value="apartment" {% if request.GET.property_type == 'apartment' %}selected{% endif %}>Apartamento</option>
                    <option value="condo" {% if request.GET.property_type == 'condo' %}selected{% endif %}>Condomínio</option>
                    <option value="townhouse" {% if request.GET.property_type == 'townhouse' %}selected{% endif %}>Sobrado</option>
                    <option value="lot" {% if request.GET.property_type == 'lot' %}selected{% endif %}>Terreno</option>
                    <option value="commercial" {% if request.GET.property_type == 'commercial' %}selected{% endif %}>Comercial</option>
                </select>
                <input type="number" name="min_price" placeholder="Preço mín." value="{{ request.GET.min_price }}">
                <input type="number" name="max_price" placeholder="Preço máx." value="{{ request.GET.max_price }}">
                <input type="number" name="bedrooms" placeholder="Quartos mín." value="{{ request.GET.bedrooms }}">
                <button type="submit" class="search-btn">
                    <i class="fas fa-filter"></i> Filtrar
                </button>
            </form>
        </div>
        
        <!-- Resultados -->
        {% if properties %}
            <div class="properties-grid">
                {% for property in properties %}
                    <div class="property-card">
                        <a href="{% url 'property_detail' property.id %}">
                            {% if property.image %}
                                <img src="{{ property.image.url }}" alt="{{ property.title }}" class="property-image">
                            {% else %}
                                <img src="https://i.pinimg.com/originals/d9/7e/fe/d97efe34177483685c825ffe7237565b.jpg" alt="{{ property.title }}" class="property-image">
                            {% endif %}
                            <div class="property-info">
                                <div class="property-price">{{ property.get_price_display }}</div>
                                <div class="property-title">{{ property.title }}</div>
                                <div class="property-address">
                                    <i class="fas fa-map-marker-alt"></i>
                                    {{ property.address }}, {{ property.city }}, {{ property.state }}
                                </div>
                                <div class="property-details">
                                    <span><i class="fas fa-bed"></i> {{ property.bedrooms }} quarto{{ property.bedrooms|pluralize }}</span>
                                    <span><i class="fas fa-bath"></i> {{ property.bathrooms }} banheiro{{ property.bathrooms|pluralize }}</span>
                                    <span><i class="fas fa-ruler-combined"></i> {{ property.area }} m²</span>
                                    {% if property.parking_spaces > 0 %}
                                        <span><i class="fas fa-car"></i> {{ property.parking_spaces }} vaga{{ property.parking_spaces|pluralize }}</span>
                                    {% endif %}
                                </div>
                            </div>
                        </a>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="no-results">
                <i class="fas fa-home"></i>
                <p>Nenhuma propriedade para compra encontrada.</p>
                <p>Tente ajustar os filtros para ver mais resultados.</p>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
